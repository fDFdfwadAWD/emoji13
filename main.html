<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Emoji Panel ‚Äî Pastel & Animations</title>
<style>
  :root{
    --bg1:#fff0f6; --bg2:#f0f8ff; --bg3:#f0fff4;
    --card:#ffffff; --muted:#666; --accent:#8ecae6; --accent2:#ffd6e0;
    --radius:14px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;
    background: radial-gradient(circle at 10% 10%, #fff7fb 0%, transparent 20%),
                radial-gradient(circle at 90% 90%, #f7fff7 0%, transparent 18%),
                linear-gradient(135deg, var(--bg1), var(--bg2) 40%, var(--bg3));
    color:#111; -webkit-font-smoothing:antialiased;
  }

  .wrap{max-width:1200px;margin:28px auto;padding:20px;display:grid;grid-template-columns:260px 1fr;gap:20px}
  @media(max-width:900px){.wrap{grid-template-columns:1fr}}

  /* sidebar */
  .sidebar{
    background:linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.7));
    border-radius:var(--radius); padding:18px; box-shadow:0 12px 30px rgba(17,24,39,0.06);
    height:fit-content;
  }
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-size:24px;color:white}
  h1{font-size:16px;margin:0}
  .muted{color:var(--muted);font-size:13px;margin-top:6px}

  .menu{margin-top:14px;display:flex;flex-direction:column;gap:8px}
  .menu button{display:flex;gap:8px;align-items:center;border:0;background:transparent;padding:8px;border-radius:10px;cursor:pointer;font-weight:700}
  .menu button:hover{background:rgba(140,202,230,0.06)}
  .menu button.active{background:linear-gradient(90deg, rgba(140,202,230,0.13), rgba(255,214,224,0.08));box-shadow:0 6px 18px rgba(140,202,230,0.06)}

  /* main */
  .main{background:var(--card);padding:18px;border-radius:18px;box-shadow:0 20px 40px rgba(17,24,39,0.06)}
  .controls{display:flex;gap:12px;align-items:center;margin-bottom:12px}
  .search{
    flex:1;background:linear-gradient(180deg,#ffffff,#fbfbff);padding:10px;border-radius:12px;display:flex;gap:10px;align-items:center;border:1px solid rgba(17,24,39,0.06)
  }
  .search input{border:0;background:transparent;outline:none;font-size:15px;width:100%}
  .pill{padding:8px 12px;border-radius:999px;background:linear-gradient(90deg,#fff,#fff);border:1px solid rgba(17,24,39,0.04);display:inline-flex;gap:8px;align-items:center;cursor:pointer}

  .title-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .title{font-size:14px;font-weight:800}
  .subtitle{color:var(--muted);font-size:13px}

  /* grid */
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(64px,1fr));gap:10px;max-height:62vh;overflow:auto;padding-right:6px}
  .card{background:linear-gradient(180deg,rgba(255,255,255,0.98),rgba(255,255,255,0.95));border-radius:12px;padding:10px;display:flex;align-items:center;justify-content:center;font-size:28px;cursor:pointer;position:relative;transition:transform .16s ease,box-shadow .16s ease}
  .card:hover{transform:translateY(-6px);box-shadow:0 14px 34px rgba(17,24,39,0.08)}
  .star{position:absolute;right:8px;top:8px;font-size:14px;opacity:0.9;cursor:pointer}
  .star.active{color:#ff6b8a}

  /* hide emoji names visually but keep in code for search */
  .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}

  /* toast */
  .toast{position:fixed;right:20px;bottom:20px;padding:10px 14px;background:linear-gradient(90deg,#0f1724,#0b1220);color:white;border-radius:10px;box-shadow:0 8px 30px rgba(10,10,30,0.3);opacity:0;transform:translateY(20px);transition:all .25s ease;z-index:999}
  .toast.show{opacity:1;transform:none}

  /* scrollbar */
  .grid::-webkit-scrollbar{width:8px;height:8px}
  .grid::-webkit-scrollbar-thumb{background:linear-gradient(180deg,rgba(140,202,230,0.3),rgba(255,214,224,0.3));border-radius:8px}

  /* small */
  @media(max-width:880px){ .wrap{padding:12px;gap:12px} .sidebar{order:2} .main{order:1} }
</style>
</head>
<body>
<div class="wrap">
  <aside class="sidebar">
    <div class="brand">
      <div class="logo">üòä</div>
      <div>
        <h1>Emoji Panel</h1>
        <div class="muted">Panel pastel ‚Äî clique pour copier ‚Ä¢ ‚≠ê favoris</div>
      </div>
    </div>

    <div class="menu" id="categoryMenu">
      <!-- g√©n√©r√© par JS -->
    </div>

    <hr style="border:0;height:1px;background:linear-gradient(90deg,transparent,#eee,transparent);margin:12px 0;border-radius:2px">
    <div style="font-size:13px;color:var(--muted)">Favoris sauvegard√©s localement.</div>
  </aside>

  <main class="main">
    <div class="controls">
      <div class="search" role="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#8b8fa6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="11" cy="11" r="6" stroke="#8b8fa6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></circle></svg>
        <input id="searchInput" placeholder="Recherche globale (ex: coeur, triste, chien) ‚Äî appuie sur / pour focus" aria-label="Rechercher des emojis">
      </div>
      <div class="pill" id="favViewBtn">‚≠ê Favoris</div>
    </div>

    <div class="title-row">
      <div>
        <div class="title" id="categoryTitle">Toutes les familles</div>
        <div class="subtitle" id="categorySubtitle">S√©lectionne une cat√©gorie ou lance une recherche</div>
      </div>
      <div style="display:flex;gap:10px;align-items:center">
        <div style="font-size:13px;color:var(--muted)">Total affich√© : <span id="count">0</span></div>
      </div>
    </div>

    <div class="grid" id="grid"></div>
  </main>
</div>

<div class="toast" id="toast">Copi√© !</div>

<script>
/* ===========================
   Donn√©es : 9 familles (~40 emojis chacune)
   Chaque item = {c:'emoji', name:'nom descriptif', tags:['tag1','tag2']}
   Les noms sont pr√©sents dans le code pour la recherche mais NE SONT PAS affich√©s.
   =========================== */

const EMOJI_DATA = {
  "Favoris": [],
  "Visages & Sourires": [
    {c:'üòÄ', name:'visage souriant', tags:['sourire','heureux']},
    {c:'üòÉ', name:'sourire large', tags:['sourire']},
    {c:'üòÑ', name:'yeux souriants', tags:['sourire']},
    {c:'üòÅ', name:'grande joie', tags:['rire']},
    {c:'üòÜ', name:'rire sinc√®re', tags:['rire']},
    {c:'üòÖ', name:'sueur de soulagement', tags:['g√™ne']},
    {c:'ü§£', name:'mort de rire', tags:['lol','rire']},
    {c:'üòÇ', name:'larmes de joie', tags:['rire']},
    {c:'üôÇ', name:'sourire l√©ger', tags:['sourire']},
    {c:'üòâ', name:'clin d oeil', tags:['clin','taquin']},
    {c:'üòá', name:'visage ange', tags:['innocent']},
    {c:'ü•∞', name:'visage avec coeurs', tags:['amour']},
    {c:'üòç', name:'yeux en coeur', tags:['amour','coeur']},
    {c:'üòò', name:'bisou', tags:['bisou','amour']},
    {c:'üòó', name:'bisou l√©ger', tags:['bisou']},
    {c:'üòö', name:'bisou yeux ferm√©s', tags:['bisou']},
    {c:'üòô', name:'bisou souriant', tags:['bisou']},
    {c:'üòã', name:'gourmand', tags:['nourriture']},
    {c:'üòú', name:'tirer la langue', tags:['taquin']},
    {c:'üòù', name:'yeux ferm√©s langue', tags:['taquin']},
    {c:'ü§™', name:'fou', tags:['fou']},
    {c:'üòõ', name:'langue dehors', tags:['taquin']},
    {c:'ü§ë', name:'argent yeux', tags:['argent']},
    {c:'ü§ó', name:'calin', tags:['calin','amour']},
    {c:'ü§≠', name:'main devant bouche', tags:['surpris']},
    {c:'ü§´', name:'chut', tags:['silence']},
    {c:'ü§î', name:'pensif', tags:['penser']},
    {c:'ü§ê', name:'bouche scell√©e', tags:['secret']},
    {c:'üòê', name:'neutre', tags:['neutre']},
    {c:'üòë', name:'expression plate', tags:['neutre']},
    {c:'üò∂', name:'muet', tags:['silence']},
    {c:'üòè', name:'sourire en coin', tags:['taquin']},
    {c:'üòí', name:'blas√©', tags:['√©nerv√©']},
    {c:'üôÑ', name:'yeux au ciel', tags:['exasp√©r√©']},
    {c:'üò¨', name:'grimace', tags:['g√™ne']},
    {c:'üò¥', name:'endormi', tags:['fatigue']},
    {c:'ü§§', name:'bave', tags:['gourmand']},
  ],

  "Gestes & Mains": [
    {c:'üëã', name:'salut main', tags:['bonjour','au revoir']},
    {c:'ü§ö', name:'main lev√©e', tags:['main']},
    {c:'üñêÔ∏è', name:'paume', tags:['main']},
    {c:'‚úã', name:'stop', tags:['stop']},
    {c:'üëå', name:'ok', tags:['ok']},
    {c:'ü§è', name:'petit', tags:['petit']},
    {c:'‚úåÔ∏è', name:'paix', tags:['victory']},
    {c:'ü§û', name:'doigts crois√©s', tags:['chance']},
    {c:'ü§ü', name:'je t aime asl', tags:['amour']},
    {c:'ü§ò', name:'rock', tags:['rock']},
    {c:'üëç', name:'pouce en l air', tags:['like']},
    {c:'üëé', name:'pouce en bas', tags:['dislike']},
    {c:'üëè', name:'applaudir', tags:['applaudir']},
    {c:'üôå', name:'mains lev√©es', tags:['joie']},
    {c:'üôè', name:'pri√®re/merci', tags:['merci']},
    {c:'üí™', name:'muscle', tags:['force']},
    {c:'ü´±', name:'main droite', tags:['main']},
    {c:'ü´≤', name:'main gauche', tags:['main']},
    {c:'ü´∂', name:'mains coeur', tags:['amour','coeur']},
    {c:'üññ', name:'salut vulcain', tags:['vulcain']},
    {c:'ü§ù', name:'poign√©e de main', tags:['rencontre']},
    {c:'‚úçÔ∏è', name:'√©crire', tags:['√©crire']},
    {c:'ü´∞', name:'doigt coeur', tags:['amour']},
    {c:'üëçüèº', name:'pouce peau claire', tags:['like']},
    {c:'üëçüèΩ', name:'pouce peau moyenne', tags:['like']},
    {c:'üëçüèø', name:'pouce peau fonc√©e', tags:['like']},
    {c:'üëä', name:'poing', tags:['poing']},
    {c:'ü§õ', name:'poing gauche', tags:['poing']},
    {c:'ü§ú', name:'poing droit', tags:['poing']},
    {c:'üëèüèº', name:'applaudir peau claire', tags:['applaudir']},
    {c:'üëèüèø', name:'applaudir peau fonc√©e', tags:['applaudir']},
    {c:'üëê', name:'mains ouvertes', tags:['ouvert']},
    {c:'üôåüèΩ', name:'mains lev√©es peau moyenne', tags:['joie']},
    {c:'ü´≥', name:'main qui pr√©sente', tags:['pr√©senter']},
    {c:'ü´¥', name:'main paume vers le haut', tags:['main']},
    {c:'ü´µ', name:'index toi', tags:['toi']},
  ],

  "Amour & C≈ìurs": [
    {c:'‚ù§Ô∏è', name:'coeur rouge', tags:['coeur','amour']},
    {c:'üß°', name:'coeur orange', tags:['coeur']},
    {c:'üíõ', name:'coeur jaune', tags:['coeur']},
    {c:'üíö', name:'coeur vert', tags:['coeur']},
    {c:'üíô', name:'coeur bleu', tags:['coeur']},
    {c:'üíú', name:'coeur violet', tags:['coeur']},
    {c:'üñ§', name:'coeur noir', tags:['coeur']},
    {c:'ü§ç', name:'coeur blanc', tags:['coeur']},
    {c:'ü§é', name:'coeur marron', tags:['coeur']},
    {c:'üíñ', name:'coeur scintillant', tags:['coeur']},
    {c:'üíò', name:'coeur fl√™che', tags:['amour']},
    {c:'üíù', name:'coeur cadeau', tags:['amour']},
    {c:'üíû', name:'coeurs tournants', tags:['amour']},
    {c:'üíï', name:'deux coeurs', tags:['coeur','amour']},
    {c:'üíì', name:'coeur battant', tags:['coeur']},
    {c:'üíó', name:'coeur japonais', tags:['coeur']},
    {c:'‚ù£Ô∏è', name:'point coeur', tags:['coeur']},
    {c:'üíü', name:'symbole coeur', tags:['coeur']},
    {c:'üíë', name:'couple avec coeur', tags:['couple']},
    {c:'üë©‚Äç‚ù§Ô∏è‚Äçüë®', name:'couple h/f', tags:['couple']},
    {c:'üë©‚Äç‚ù§Ô∏è‚Äçüë©', name:'couple f/f', tags:['couple']},
    {c:'üë®‚Äç‚ù§Ô∏è‚Äçüë®', name:'couple h/h', tags:['couple']},
    {c:'üíè', name:'couple qui s embrasse', tags:['bisou']},
    {c:'üíã', name:'trace de bisou', tags:['bisou']},
    {c:'üåπ', name:'rose', tags:['fleur','amour']},
    {c:'üíê', name:'bouquet', tags:['fleur','amour']},
    {c:'üíå', name:'lettre d amour', tags:['amour']},
    {c:'ü´∂', name:'mains coeur', tags:['coeur']},
    {c:'üíë', name:'couple coeur', tags:['couple']},
    {c:'üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë©', name:'couple bisou f/f', tags:['bisou']},
    {c:'üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®', name:'couple bisou h/h', tags:['bisou']},
    {c:'ü•∞', name:'visage amoureux', tags:['amour']},
    {c:'üòò', name:'bisou coeur', tags:['bisou']},
    {c:'üòª', name:'chat amoureux', tags:['chat','amour']},
    {c:'üíû', name:'pulsation coeurs', tags:['coeur']},
    {c:'‚ù£', name:'coeur exclamation', tags:['coeur']},
    {c:'üíì', name:'coeur amour', tags:['coeur']},
    {c:'üíù', name:'coeur cadeau', tags:['coeur']},
    {c:'üíó', name:'coeur rose', tags:['coeur']},
  ],

  "Animaux": [
    {c:'üê∂', name:'chien', tags:['chien','animal']},
    {c:'üê±', name:'chat', tags:['chat','animal']},
    {c:'üê≠', name:'souris', tags:['souris']},
    {c:'üêπ', name:'hamster', tags:['hamster']},
    {c:'üê∞', name:'lapin', tags:['lapin']},
    {c:'ü¶ä', name:'renard', tags:['renard']},
    {c:'üêª', name:'ours', tags:['ours']},
    {c:'üêº', name:'panda', tags:['panda']},
    {c:'üê®', name:'koala', tags:['koala']},
    {c:'üêØ', name:'tigre', tags:['tigre']},
    {c:'ü¶Å', name:'lion', tags:['lion']},
    {c:'üêÆ', name:'vache', tags:['vache']},
    {c:'üê∑', name:'cochon', tags:['cochon']},
    {c:'üê∏', name:'grenouille', tags:['grenouille']},
    {c:'üêµ', name:'singe', tags:['singe']},
    {c:'üêî', name:'poule', tags:['poule']},
    {c:'üêß', name:'pingouin', tags:['oiseau']},
    {c:'üê¶', name:'oiseau', tags:['oiseau']},
    {c:'ü¶Ü', name:'canard', tags:['oiseau']},
    {c:'ü¶Ö', name:'aigle', tags:['oiseau']},
    {c:'ü¶â', name:'hibou', tags:['oiseau']},
    {c:'ü¶á', name:'chauve-souris', tags:['animal']},
    {c:'üê∫', name:'loup', tags:['loup']},
    {c:'üêó', name:'sanglier', tags:['cochon']},
    {c:'üê¥', name:'cheval', tags:['cheval']},
    {c:'ü¶Ñ', name:'licorne', tags:['magique']},
    {c:'üêù', name:'abeille', tags:['insecte']},
    {c:'üêõ', name:'chenille', tags:['insecte']},
    {c:'ü¶ã', name:'papillon', tags:['insecte']},
    {c:'üêå', name:'escargot', tags:['lent']},
    {c:'üêû', name:'coccinelle', tags:['insecte']},
    {c:'üê¢', name:'tortue', tags:['reptile']},
    {c:'üêç', name:'serpent', tags:['reptile']},
    {c:'ü¶é', name:'l√©zard', tags:['reptile']},
    {c:'ü¶ï', name:'dino sauropode', tags:['dino']},
    {c:'ü¶ñ', name:'dino t-rex', tags:['dino']},
    {c:'üê¨', name:'dauphin', tags:['mer']},
    {c:'üê≥', name:'baleine', tags:['mer']},
  ],

  "Nourriture & Boissons": [
    {c:'üçè', name:'pomme verte', tags:['fruit']},
    {c:'üçé', name:'pomme rouge', tags:['fruit']},
    {c:'üçê', name:'poire', tags:['fruit']},
    {c:'üçä', name:'orange', tags:['fruit']},
    {c:'üçã', name:'citron', tags:['fruit']},
    {c:'üçå', name:'banane', tags:['fruit']},
    {c:'üçâ', name:'past√®que', tags:['fruit']},
    {c:'üçá', name:'raisins', tags:['fruit']},
    {c:'üçì', name:'fraise', tags:['fruit']},
    {c:'üçà', name:'melon', tags:['fruit']},
    {c:'üçí', name:'cerise', tags:['fruit']},
    {c:'üçë', name:'p√™che', tags:['fruit']},
    {c:'üçç', name:'ananas', tags:['fruit']},
    {c:'ü•≠', name:'mangue', tags:['fruit']},
    {c:'ü••', name:'noix de coco', tags:['fruit']},
    {c:'ü•ù', name:'kiwi', tags:['fruit']},
    {c:'üçÖ', name:'tomate', tags:['legume']},
    {c:'üçÜ', name:'aubergine', tags:['legume']},
    {c:'ü•ë', name:'avocat', tags:['legume']},
    {c:'ü•¶', name:'brocoli', tags:['legume']},
    {c:'ü•ï', name:'carotte', tags:['legume']},
    {c:'üåΩ', name:'ma√Øs', tags:['legume']},
    {c:'üçî', name:'burger', tags:['fastfood']},
    {c:'üçü', name:'frites', tags:['fastfood']},
    {c:'üçï', name:'pizza', tags:['fastfood']},
    {c:'üå≠', name:'hotdog', tags:['fastfood']},
    {c:'üåÆ', name:'taco', tags:['fastfood']},
    {c:'üåØ', name:'burrito', tags:['fastfood']},
    {c:'üç£', name:'sushi', tags:['japonais']},
    {c:'üç§', name:'crevette', tags:['mer']},
    {c:'üçù', name:'p√¢tes', tags:['italien']},
    {c:'üçú', name:'ramen', tags:['japonais']},
    {c:'üç≤', name:'soupe', tags:['soupe']},
    {c:'üç∞', name:'g√¢teau', tags:['dessert']},
    {c:'üßÅ', name:'cupcake', tags:['dessert']},
    {c:'üç©', name:'donut', tags:['dessert']},
    {c:'üç™', name:'cookie', tags:['dessert']},
    {c:'‚òï', name:'caf√©', tags:['boisson']},
    {c:'üçµ', name:'th√©', tags:['boisson']},
  ],

  "Voyage & Transport": [
    {c:'üöó', name:'voiture', tags:['transport']},
    {c:'üöï', name:'taxi', tags:['transport']},
    {c:'üöô', name:'suv', tags:['transport']},
    {c:'üöå', name:'bus', tags:['transport']},
    {c:'üöé', name:'trolleybus', tags:['transport']},
    {c:'üèéÔ∏è', name:'voiture course', tags:['course']},
    {c:'üöì', name:'voiture police', tags:['police']},
    {c:'üöë', name:'ambulance', tags:['urgence']},
    {c:'üöí', name:'camion pompier', tags:['urgence']},
    {c:'üöê', name:'van', tags:['transport']},
    {c:'üöö', name:'camion', tags:['transport']},
    {c:'üöõ', name:'camion remorque', tags:['transport']},
    {c:'üöú', name:'tracteur', tags:['ferme']},
    {c:'üõ¥', name:'trottinette', tags:['sport']},
    {c:'üö≤', name:'v√©lo', tags:['transport']},
    {c:'üõµ', name:'scooter', tags:['transport']},
    {c:'üèçÔ∏è', name:'moto', tags:['transport']},
    {c:'‚úàÔ∏è', name:'avion', tags:['voyage']},
    {c:'üõ´', name:'d√©collage', tags:['voyage']},
    {c:'üõ¨', name:'atterrissage', tags:['voyage']},
    {c:'üöÄ', name:'fus√©e', tags:['espace']},
    {c:'üõ∏', name:'ovnis', tags:['espace']},
    {c:'üöÅ', name:'h√©licopt√®re', tags:['transport']},
    {c:'üöÇ', name:'train √† vapeur', tags:['train']},
    {c:'üöÜ', name:'train', tags:['train']},
    {c:'üöä', name:'tram', tags:['transport']},
    {c:'üöâ', name:'gare', tags:['lieu']},
    {c:'‚õµ', name:'voilier', tags:['bateau']},
    {c:'üõ∂', name:'cano√´', tags:['bateau']},
    {c:'üö§', name:'bateau rapide', tags:['bateau']},
    {c:'üõ≥Ô∏è', name:'paquebot', tags:['bateau']},
    {c:'üèùÔ∏è', name:'√Æle', tags:['vacances']},
    {c:'üèñÔ∏è', name:'plage', tags:['vacances']},
    {c:'üèîÔ∏è', name:'montagne', tags:['nature']},
    {c:'üó∫Ô∏è', name:'carte', tags:['navigation']},
    {c:'üß≠', name:'boussole', tags:['navigation']},
    {c:'üè®', name:'h√¥tel', tags:['logement']},
    {c:'üèïÔ∏è', name:'camping', tags:['vacances']},
  ],

  "Objets & Tech": [
    {c:'‚åö', name:'montre', tags:['objet']},
    {c:'üì±', name:'t√©l√©phone', tags:['tech']},
    {c:'üì≤', name:'t√©l√©phone re√ßu', tags:['tech']},
    {c:'üíª', name:'ordinateur portable', tags:['tech']},
    {c:'üñ•Ô∏è', name:'ordinateur', tags:['tech']},
    {c:'üñ®Ô∏è', name:'imprimante', tags:['bureau']},
    {c:'üïπÔ∏è', name:'manette', tags:['jeu']},
    {c:'üéß', name:'casque', tags:['musique']},
    {c:'üì∑', name:'appareil photo', tags:['photo']},
    {c:'üì∏', name:'photo prise', tags:['photo']},
    {c:'üì∫', name:'t√©l√©vision', tags:['media']},
    {c:'üìª', name:'radio', tags:['audio']},
    {c:'üîå', name:'prise', tags:['√©lectricit√©']},
    {c:'üí°', name:'ampoule', tags:['id√©e']},
    {c:'üîí', name:'verrou', tags:['s√©curit√©']},
    {c:'üîë', name:'cl√©', tags:['cl√©']},
    {c:'üß≠', name:'boussole', tags:['navigation']},
    {c:'üì¶', name:'colis', tags:['logistique']},
    {c:'üß∞', name:'bo√Æte √† outils', tags:['outil']},
    {c:'üîß', name:'cl√© √† molette', tags:['outil']},
    {c:'üî®', name:'marteau', tags:['outil']},
    {c:'ü™õ', name:'tournevis', tags:['outil']},
    {c:'‚öôÔ∏è', name:'engrenage', tags:['config']},
    {c:'üßØ', name:'extincteur', tags:['s√©curit√©']},
    {c:'üîã', name:'batterie', tags:['√©nergie']},
    {c:'üì°', name:'antenne satellite', tags:['comm']},
    {c:'üßæ', name:'re√ßu', tags:['document']},
    {c:'üìÅ', name:'dossier', tags:['fichier']},
    {c:'üìé', name:'trombone', tags:['bureau']},
    {c:'‚úÇÔ∏è', name:'ciseaux', tags:['outil']},
    {c:'üñäÔ∏è', name:'stylo', tags:['√©crire']},
    {c:'üìù', name:'note', tags:['√©crire']},
    {c:'üìö', name:'livres', tags:['lecture']},
    {c:'üìñ', name:'livre ouvert', tags:['lecture']},
    {c:'üõí', name:'chariot', tags:['achat']},
    {c:'üí≥', name:'carte bancaire', tags:['paiement']},
    {c:'üî≠', name:'t√©lescope', tags:['astronomie']},
    {c:'üßø', name:'≈ìil protecteur', tags:['amulette']},
  ],

  "Symboles & Signs": [
    {c:'‚ö†Ô∏è', name:'attention', tags:['alerte']},
    {c:'‚ùó', name:'exclamation', tags:['alerte']},
    {c:'‚ùì', name:'question', tags:['question']},
    {c:'‚úÖ', name:'check', tags:['ok']},
    {c:'‚ùå', name:'croix', tags:['non']},
    {c:'‚ûï', name:'plus', tags:['math']},
    {c:'‚ûñ', name:'moins', tags:['math']},
    {c:'‚úñÔ∏è', name:'multiplication', tags:['math']},
    {c:'‚ûó', name:'division', tags:['math']},
    {c:'‚ôªÔ∏è', name:'recycler', tags:['eco']},
    {c:'‚ù§Ô∏è', name:'coeur symbole', tags:['coeur']},
    {c:'‚ú®', name:'√©tincelle', tags:['cool']},
    {c:'üî•', name:'feu', tags:['chaud']},
    {c:'üí•', name:'explosion', tags:['boom']},
    {c:'üîî', name:'cloche', tags:['alerte']},
    {c:'üîï', name:'son coup√©', tags:['son']},
    {c:'üí§', name:'zZZ', tags:['dormir']},
    {c:'‚ôø', name:'accessible', tags:['handicap']},
    {c:'üöÆ', name:'poubelle', tags:['propre']},
    {c:'üö≠', name:'interdit fumer', tags:['sant√©']},
    {c:'üîû', name:'interdit moins 18', tags:['restrictions']},
    {c:'üÜó', name:'ok carr√©', tags:['ok']},
    {c:'üÜí', name:'cool', tags:['cool']},
    {c:'üÜï', name:'nouveau', tags:['nouveau']},
    {c:'üõë', name:'stop panneau', tags:['stop']},
    {c:'üìõ', name:'badge', tags:['id']},
    {c:'‚öúÔ∏è', name:'fleur de lis', tags:['symbole']},
    {c:'‚òÆÔ∏è', name:'paix', tags:['paix']},
    {c:'‚úùÔ∏è', name:'croix chr√©tienne', tags:['religion']},
    {c:'‚ò™Ô∏è', name:'croissant √©toile', tags:['religion']},
    {c:'üîØ', name:'√©toile juive', tags:['religion']},
    {c:'üïâÔ∏è', name:'om', tags:['religion']},
    {c:'‚ú°Ô∏è', name:'etoile david', tags:['religion']},
    {c:'‚ôà', name:'b√©lier', tags:['zodiaque']},
    {c:'‚ôâ', name:'taureau', tags:['zodiaque']},
    {c:'‚ôä', name:'g√©meaux', tags:['zodiaque']},
    {c:'‚ôã', name:'cancer', tags:['zodiaque']},
  ],

  "Nature & Plantes": [
    {c:'üå±', name:'jeune pousse', tags:['plante']},
    {c:'üåø', name:'branche', tags:['plante']},
    {c:'‚òòÔ∏è', name:'tr√®fle', tags:['plante','chance']},
    {c:'üçÄ', name:'tr√®fle 4 feuilles', tags:['chance']},
    {c:'üéç', name:'bambou', tags:['plante']},
    {c:'üéã', name:'bambou festival', tags:['plante']},
    {c:'üçÉ', name:'feuille qui vole', tags:['plante']},
    {c:'üçÇ', name:'feuilles tomb√©es', tags:['automne']},
    {c:'üå∑', name:'tulipe', tags:['fleur']},
    {c:'üåπ', name:'rose', tags:['fleur']},
    {c:'üå∫', name:'hibiscus', tags:['fleur']},
    {c:'üåª', name:'tournesol', tags:['fleur']},
    {c:'üåº', name:'fleur', tags:['fleur']},
    {c:'üå∏', name:'fleur cerisier', tags:['fleur']},
    {c:'üèµÔ∏è', name:'rosace', tags:['fleur']},
    {c:'üíê', name:'bouquet', tags:['fleur']},
    {c:'üåæ', name:'gerbe', tags:['plantation']},
    {c:'üåµ', name:'cactus', tags:['plante']},
    {c:'üéÑ', name:'sapin noel', tags:['f√™te']},
    {c:'üå≥', name:'arbre', tags:['arbre']},
    {c:'üå≤', name:'sapin', tags:['arbre']},
    {c:'üå¥', name:'palmier', tags:['plage']},
    {c:'üå±', name:'pousse', tags:['plante']},
    {c:'üåæ', name:'bl√©', tags:['plante']},
    {c:'‚òÄÔ∏è', name:'soleil', tags:['m√©t√©o']},
    {c:'üå§Ô∏è', name:'partiellement ensoleill√©', tags:['m√©t√©o']},
    {c:'‚õÖ', name:'nuage soleil', tags:['m√©t√©o']},
    {c:'üåßÔ∏è', name:'pluie', tags:['m√©t√©o']},
    {c:'‚õàÔ∏è', name:'orage', tags:['m√©t√©o']},
    {c:'üå©Ô∏è', name:'√©clair', tags:['m√©t√©o']},
    {c:'üå®Ô∏è', name:'neige', tags:['m√©t√©o']},
    {c:'‚ùÑÔ∏è', name:'flocon', tags:['neige']},
    {c:'üî•', name:'feu', tags:['chaud']},
    {c:'üíß', name:'goutte', tags:['eau']},
    {c:'üåä', name:'vague', tags:['mer']},
    {c:'üå´Ô∏è', name:'brume', tags:['m√©t√©o']},
    {c:'üå™Ô∏è', name:'tornade', tags:['m√©t√©o']},
  ]
};

/* ===========================
   Etat & utilitaires UI
   =========================== */

const categoryMenu = document.getElementById('categoryMenu');
const grid = document.getElementById('grid');
const searchInput = document.getElementById('searchInput');
const categoryTitle = document.getElementById('categoryTitle');
const categorySubtitle = document.getElementById('categorySubtitle');
const countEl = document.getElementById('count');
const toast = document.getElementById('toast');
const favViewBtn = document.getElementById('favViewBtn');

let state = {
  currentCategory: 'Visages & Sourires',
  query: '',
  showFavs: false,
  favorites: new Set(JSON.parse(localStorage.getItem('emoji_favs')||'[]'))
};

function saveFavs(){ localStorage.setItem('emoji_favs', JSON.stringify(Array.from(state.favorites))) }

function showToast(text='Copi√© !'){ clearTimeout(window._t); toast.innerText = text; toast.classList.add('show'); window._t = setTimeout(()=>toast.classList.remove('show'),1400); }

/* recherche: nom, tags, caract√®re */
function matches(item,q){
  if(!q) return true;
  q = q.toLowerCase().trim();
  if(item.c.includes(q)) return true;
  if(item.name && item.name.toLowerCase().includes(q)) return true;
  if(item.tags && item.tags.some(t=>t.toLowerCase().includes(q))) return true;
  return false;
}

/* flatten all emojis into array with category info */
function allEmojis(){
  const arr = [];
  for(const [cat, list] of Object.entries(EMOJI_DATA)){
    list.forEach(it => arr.push({...it, category:cat}));
  }
  return arr;
}

/* build menu */
function buildMenu(){
  categoryMenu.innerHTML = '';
  const cats = Object.keys(EMOJI_DATA);
  cats.forEach(cat=>{
    const btn = document.createElement('button');
    btn.innerText = (cat==='Favoris'?'‚≠ê ':'') + cat;
    btn.dataset.cat = cat;
    btn.addEventListener('click', ()=>{
      state.currentCategory = cat; state.showFavs = (cat==='Favoris'); state.query=''; searchInput.value=''; render();
    });
    if(cat === state.currentCategory) btn.classList.add('active');
    categoryMenu.appendChild(btn);
  });
}

/* render list (either by category or search results or favorites) */
function render(){
  // update menu active
  Array.from(categoryMenu.children).forEach(b=>b.classList.toggle('active', b.dataset.cat===state.currentCategory));

  grid.innerHTML = '';
  let items = [];
  if(state.showFavs){
    // favorites across categories
    const favs = new Set(state.favorites);
    items = allEmojis().filter(it => favs.has(it.c) && matches(it, state.query));
    categoryTitle.innerText = '‚≠ê Favoris';
    categorySubtitle.innerText = state.query ? `R√©sultats pour "${state.query}"` : 'Vos emojis favoris';
  } else if(state.query && state.query.trim()!==''){
    // search across all categories
    items = allEmojis().filter(it => matches(it, state.query));
    categoryTitle.innerText = 'üîé R√©sultats';
    categorySubtitle.innerText = `Recherche globale : "${state.query}" ‚Äî ${items.length} r√©sultats`;
  } else {
    // show current category
    const list = EMOJI_DATA[state.currentCategory] || [];
    items = list.slice();
    categoryTitle.innerText = state.currentCategory;
    categorySubtitle.innerText = `${items.length} emojis`;
  }

  // render items
  items.forEach(it=>{
    const el = document.createElement('div');
    el.className = 'card';
    el.title = it.name || it.c; // accessible name on hover
    // inner char only (name not shown)
    el.innerHTML = `
      <div aria-hidden="true">${it.c}</div>
      <div class="visually-hidden" data-name>${it.name}</div>
      <div class="star ${state.favorites.has(it.c)?'active':''}" data-emoji>${state.favorites.has(it.c)?'‚òÖ':'‚òÜ'}</div>
    `;
    // copy on click (but ignore click on star)
    el.addEventListener('click', async (e)=>{
      if(e.target.closest('.star')) return;
      try{
        await navigator.clipboard.writeText(it.c);
        showToast(`${it.c} copi√©`);
      }catch(err){
        // fallback
        const ta = document.createElement('textarea'); ta.value = it.c; document.body.appendChild(ta); ta.select();
        try{ document.execCommand('copy'); showToast(`${it.c} copi√©`); } catch(e){ showToast('Impossible de copier') }
        ta.remove();
      }
    });
    // star click
    const star = el.querySelector('.star');
    star.addEventListener('click', (ev)=>{
      ev.stopPropagation();
      const ch = it.c;
      if(state.favorites.has(ch)){ state.favorites.delete(ch); star.classList.remove('active'); star.innerText='‚òÜ'; }
      else { state.favorites.add(ch); star.classList.add('active'); star.innerText='‚òÖ'; }
      saveFavs();
      // if viewing favorites, re-render to remove disappeared ones
      if(state.showFavs) render();
    });

    grid.appendChild(el);
  });

  // count
  countEl.innerText = items.length;
}

/* events */
searchInput.addEventListener('input', (e)=>{
  state.query = e.target.value;
  state.showFavs = false;
  render();
  // update category buttons active
  Array.from(categoryMenu.children).forEach(b=>b.classList.toggle('active', false));
});

favViewBtn.addEventListener('click', ()=>{
  state.showFavs = !state.showFavs;
  state.currentCategory = state.showFavs ? 'Favoris' : 'Visages & Sourires';
  render();
});

window.addEventListener('keydown', e=>{
  if(e.key === '/') { e.preventDefault(); searchInput.focus(); }
});

/* init */
buildMenu();
render();
</script>
</body>
</html>